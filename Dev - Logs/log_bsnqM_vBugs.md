## Common bugs in the code

1. [_updateSoln()_ failing in Aqua cluster [2020-09-09]](#log_bsnqM_vBugs_1)


### Attempting
- From 2020-Sep-09 onwards, the bugs in the main code common across all branches will be noted here.
- This log file should only be updated for a branch if the bug-fix has been done in that branch.


### List of Work


-----------------------------------------------


<a name = 'log_bsnqM_vBugs_1' ></a>

### _updateSoln()_ failing in Aqua cluster [2020-09-09] [2020-09-09]
- While running the Boussinesq code in IITM's new Aqua cluster, I sometimes got segmentation fault in the first step for RK$ for the first time-step itself.
- It was quite a random error. In one example the case ran fine for 0.1s time-step and then gave a segmentation fault the exact same case when I ran with 0.05s time-step.
- On checking I found that the segmentation fault came from _updateSoln()_ subroutine.
- On deeper check it was realised the error was from the following line in each of the select case. <br> `b%tOb(0)%e = b%tOb(1)%e + b%gXE/2d0`
	- On commenting this line the code runs without segmentation fault
	- This is completely random as the case runs absolutely fine in Aqua for some cases and fails for some other cases.
	- I check there is no issue with allocated memory or matrix size.
	- Infact the case which gives error in Aqua runs fine in my laptop or in VSR server.
- I believe its some weird issue with the SIMD code generated by ifort for that line. 
	- Its weird that there is no issue in any of the other line in this subroutines.
- I sorted this out by changing this to a loop and put OpenMP parallel.
- After this it ran fine in Aqua.
- It was confirmed through cases rect2D and inl2B that results are identical and run-time is not effected at all. (maybe very very marginally faster)

-----------------------------------------------